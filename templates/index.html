<!doctype html>
<head>
    <title>Angkot to School</title>
    <link rel="stylesheet" type="text/css" href="../static/css/style.css"/>
    <link rel="stylesheet" type="text/css" href="../static/css/spatial_style.css"/>
    <link rel="stylesheet" type="text/css" href="../static/css/chart_style.css"/>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.4.0/dist/leaflet.css"
        integrity="sha512-puBpdR0798OZvTTbP4A8Ix/l+A4dHDD0DGqYW6RQ+9jxkRFclaxxQb/SJAWZfWAkuyeQUytO7+7N4QKrDh+drA=="
        crossorigin=""/>
    <link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Open+Sans" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Princess Sofia" />
    <link href='https://fonts.googleapis.com/css?family=Montserrat' rel='stylesheet'/>

</head>
<body style="background-color: rgb(180,180,180)">
    <div style="text-align: center;">
        <h1 style="font-family: 'Princess Sofia'; font-size: 300%;">Angkot to School</h1>
        <subh1 style="font-family: 'Montserrat'">Seberapa Siapkah Kota Bandung?</subh1>
    </div>
    <hr>
    <p>Program “Angkot to School” merupakan program yang direncanakan pemerintah kota Bandung untuk mengatasi kemacetan.
            Dalam program ini, angkot memiliki fungsi yang sama dengan bis sekolah, yaitu menjemput dan mengantar siswa di titik kumpul.
            Dengan demikian, jumlah kendaraan pribadi akan berkurang pada saat jam antar jemput sekolah.</p>
    <div class="row">
        <div class="column">
            <div class="column1">
                <!--<form action="" method="post">
                    <p>Jumlah siswa/angkot</p>
                        <input type="text" value="10">-->
                    <!-- <p>Angkot</p>
                    {% for tryk in trayek["trayek"] %}
                        <input type="checkbox" name="trayek" value={{tryk}}> {{ tryk }}
                        <br>
                    {% endfor %} -->
                <!--</form>-->
            </div>
            
            <div class="column2">
                <!--<form action="" method="post">
                    <p>Sekolah</p>
                        <input type="checkbox" name="sekolah" value="SD"> SD
                        <input type="checkbox" name="sekolah" value="SMP"> SMP
                        <input type="checkbox" name="sekolah" value="SMK"> SMK
                        <input type="checkbox" name="sekolah" value="SMA"> SMA
                        <input type="checkbox" name="sekolah" value="SLB"> SLB-->
                    <!-- <p>Kecamatan</p>
                    {% for kec in kecamatan["kecamatan"] %}
                        <input type="checkbox" name="kecamatan" value={{kec}}> {{ kec |capitalize }}
                        <br>
                    {% endfor %} -->
                <!--</form>-->
            </div>
            <div id="mapid"></div>
        </div>
        <div class="column">
            <div class="row">
                <div id="total_bubble"></div>
                <p>
                    Terpenuhi :
                    <script>
                        document.write(Math.round(
                            ('{{ angkot_total }}' / '{{ siswa_total["total"]/10 }}') * 100
                        ));
                    </script>
                    %
                </p>
                <div id="kecamatan"></div>
                <p>Bagian ini berisi kesimpulan</p>
                <p>Bagian ini berisi sumber data</p>
            </div>
        </div>
    </div>
    <!-- <div id="chartKecamatan"></div> -->

    <script src="https://unpkg.com/leaflet@1.4.0/dist/leaflet.js"
        integrity="sha512-QVftwZFqvtRNi0ZyCtsznlKSWOStnDORoefr1enyq5mVL4tmKB3S/EnC3rRJcxCPavG10IcrVGSmPh6Qw5lwrg=="
        crossorigin="">
    </script>
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script> 
    <script type="text/javascript" src="../static/javascript/spatial_data.js"></script>
    <script type="text/javascript" src="../static/javascript/chart.js"></script> 
    <script type="text/javascript" src="https://cdn.zingchart.com/zingchart.min.js"></script>

    <script>
        var kebKecamatan = [];
        var kebAngkot = [];
        var jmlAngkot = [];
    </script>
    {% for kebKecamatan in spatial %}
        <script> kebKecamatan.push('{{ kebKecamatan[0] |capitalize }}');</script>
    {% endfor %}

    {% for kebAngkot in spatial %}
        <script> kebAngkot.push('{{ kebAngkot[2]/10 }}');</script>
    {% endfor %}

    {% for jmlAngkot in spatial %}
        <script> jmlAngkot.push('{{ jmlAngkot[3] }}');</script>
    {% endfor %}

    <script>
        setDataKecamatan(kebKecamatan, jmlAngkot, kebAngkot);
    </script>

    <script>
        setDataTotal('{{ angkot_total }}', '{{ siswa_total["total"] }}');
    </script>

    <script type="text/javascript" src="../static/javascript/spatial.js"></script>
    {% for geo in spatial %}
        <script>
            addCircle(
                '{{ geo[1]["coordinates"][0] }}',
                '{{ geo[1]["coordinates"][1] }}',
                '{{ geo[2]/20 }}',
                'white',
                '#E12F2F',
            0.8);
            if (parseInt('{{ geo[3]/2 }}') > 0) {
                addCircle(
                    '{{ geo[1]["coordinates"][0] }}',
                    '{{ geo[1]["coordinates"][1] }}',
                    '{{ geo[3]/2 }}',
                    'white',
                    '#28B67C',
                0.8);
            }
        </script>
    {% endfor %}
</body>